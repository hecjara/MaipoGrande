{% extends 'core/base.html' %}

{% load static %}

{% block contenido %}

<br>

<div class="container">
    <h1 class="text-center">Mis solicitudes <i class="fas fa-shopping-basket"></i></h1>

    <a href="" class="btn btn-success btn-rounded">
        <i class="fas fa-plus-circle" aria-hidden="true"></i>
        Nueva Solicitud
    </a>
<br>
    <div class="table-responsive">
        <!--Table-->
        <table id="tablePreview" class="table table-hover table-fixed table-bordered ">
            <!--Table head-->
            <thead class="green white-text">
                <tr>
                    <th scope="col" class="text-center">Nro. Solicitud</th>
                    <th scope="col" class="text-center">Fecha ingreso</th>
                    <th scope="col" class="text-center">Estado</th>
                    <!-- <th scope="col">Productos</th> -->
                    <!-- <th scope="col">Oferta??</th> -->
                    <th scope="col" class="text-center">Envio</th>
                    <th scope="col" class="text-center">Opciones Solicitud</th>
                    <th scope="col" class="text-center">Opciones Productos</th>
                </tr>
            </thead>
            <!--Table head-->
            <!--Table body-->
            <tbody>
                {% for s in soli %}
                <tr>
                    <td class="text-center">{{ s.id_solicitud }}</td>
                    <td class="text-center">{{ s.fecha_pedido }}</td>
                    <td class="text-center">{{ s.id_estado.nombre_estado }}</td>
                    <td class="text-center">Entre {{ s.fecha_min|date:"d M" }} y {{ s.fecha_max|date:"d M Y" }} </td>

                    {% if s.id_estado.nombre_estado == 'Anulado' %}

                        <td class="text-center">
                            <!-- <a class="btn btn-primary btn-sm" href=""><i class="fas fa-cogs mr-1"></i>Modificar</a> -->
                            <a class="btn btn-danger btn-rounded btn-sm disabled" href="{% url 'anular_solicitud' s.id_solicitud %}" aria-disabled="true" role="button" ><i class="fas fa-minus-circle mr-1" aria-hidden="true"></i>Anular</a>
                        </td>
                        <td class="text-center">
                            <a class="btn btn-primary btn-sm disabled" href="{% url 'agregar_producto' s.id_solicitud %}" aria-disabled="true" role="button" ><i class="fas fa-cart-plus mr-1"></i>Agregar</a>
                            <a class="btn btn-primary btn-sm disabled" href="{% url 'listar_productos' s.id_solicitud %}" aria-disabled="true" role="button" ><i class="fas fa-cog mr-1"></i>Administrar</a>
                        </td>

                    {% else %}

                        <td class="text-center">
                            <!-- <a class="btn btn-primary btn-sm" href=""><i class="fas fa-cogs mr-1"></i>Modificar</a> -->
                            <a class="btn btn-danger btn-rounded btn-sm" href="{% url 'anular_solicitud' s.id_solicitud %}"><i class="fas fa-minus-circle mr-1" aria-hidden="true"></i>Anular</a>
                        </td>
                        <td class="text-center">
                            <a class="btn btn-primary btn-sm" href="{% url 'agregar_producto' s.id_solicitud %}"><i class="fas fa-cart-plus mr-1"></i>Agregar</a>
                            <a class="btn btn-primary btn-sm" href="{% url 'listar_productos' s.id_solicitud %}"><i class="fas fa-cog mr-1"></i>Administrar</a>
                        </td>

                    {% endif %}

                </tr>
                
                {% endfor %}


            </tbody>
            <!--Table body-->
        </table>
        <!--Table-->



        <!-- <a href="" class="btn btn-danger btn-rounded">
            <i class="fas fa-minus-circle" aria-hidden="true"></i>
            Anular Solicitud
        </a> -->

    </div>

</div>


{% endblock %}